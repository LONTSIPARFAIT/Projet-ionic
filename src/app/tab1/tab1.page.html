<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Inscription</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-card>
    <ion-card-header>
      <ion-card-title>Formulaire</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <form [formGroup]="myForm" (ngSubmit)="onSubmit()">
        <!-- Champ Nom -->
        <ion-item>
          <ion-label position="floating">Nom</ion-label>
          <ion-input formControlName="name" type="text"></ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="myForm.get('name')?.invalid && myForm.get('name')?.touched">
          Le nom est requis (minimum 3 caractères).
        </ion-text>

        <!-- Champ Email -->
        <ion-item>
          <ion-label position="floating">Email</ion-label>
          <ion-input formControlName="email" type="email"></ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="myForm.get('email')?.invalid && myForm.get('email')?.touched">
          Veuillez entrer un email valide.
        </ion-text>

        <!-- Champ Message -->
        <ion-item>
          <ion-label position="floating">Message</ion-label>
          <ion-textarea formControlName="message" rows="4"></ion-textarea>
        </ion-item>
        <ion-text color="danger" *ngIf="myForm.get('message')?.invalid && myForm.get('message')?.touched">
          Le message est requis.
        </ion-text>

        <!-- Bouton Soumettre -->
        <ion-button type="submit" expand="block" color="primary" [disabled]="myForm.invalid || isLoading">
          <ion-spinner name="crescent" *ngIf="isLoading"></ion-spinner>
          {{ isLoading ? 'Envoi...' : 'Envoyer' }}
        </ion-button>
      </form>
    </ion-card-content>
  </ion-card>

  <!-- Tableau des soumissions -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Soumissions</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-spinner name="crescent" *ngIf="isLoading"></ion-spinner>
      <ion-grid *ngIf="!isLoading">
        <ion-row class="header-row ion-text-center">
          <ion-col>Nom</ion-col>
          <ion-col>Email</ion-col>
          <ion-col>Message</ion-col>
          <ion-col>Actions</ion-col>
        </ion-row>
        <ion-row *ngFor="let submission of submissions" class="ion-text-center">
          <ion-col>{{ submission.name }}</ion-col>
          <ion-col>{{ submission.email }}</ion-col>
          <ion-col>{{ submission.message }}</ion-col>
          <ion-col>
            <ion-button size="small" color="warning" (click)="openEditModal(submission)">
              <ion-icon name="pencil"></ion-icon>
            </ion-button>
            <ion-button size="small" color="danger" (click)="deleteSubmission(submission.id)">
              <ion-icon name="trash"></ion-icon>
            </ion-button>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="submissions.length === 0" class="ion-text-center">
          <ion-col>Aucune soumission pour le moment.</ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>
</ion-content>

<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Inscription
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-card>
    <ion-card-header>
      <ion-card-title>Formulaire</ion-card-title>
    </ion-card-header>
    <ion-card-content> -->
      <!-- <form [formGroup]="myForm" (ngSubmit)="onSubmit()"> -->
        <!-- Champ Nom -->
        <!-- <ion-item>
          <ion-label position="floating">Nom</ion-label>
          <ion-input formControlName="name" type="text"></ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="myForm.get('name')?.invalid && myForm.get('name')?.touched">
          Le nom est requis (minimum 3 caractères).
        </ion-text> -->

        <!-- Champ Email -->
        <!-- <ion-item>
          <ion-label position="floating">Email</ion-label>
          <ion-input formControlName="email" type="email"></ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="myForm.get('email')?.invalid && myForm.get('email')?.touched">
          Veuillez entrer un email valide.
        </ion-text> -->

        <!-- Champ Message -->
        <!-- <ion-item>
          <ion-label position="floating">Message</ion-label>
          <ion-textarea formControlName="message" rows="4"></ion-textarea>
        </ion-item>
        <ion-text color="danger" *ngIf="myForm.get('message')?.invalid && myForm.get('message')?.touched">
          Le message est requis.
        </ion-text> -->

        <!-- Bouton Soumettre -->
        <!-- <ion-button type="submit" expand="block" color="primary" [disabled]="myForm.invalid">
          Envoyer
        </ion-button>
      </form>
    </ion-card-content>
  </ion-card>  -->

<!-- Tableau des soumissions -->
<!-- <ion-card>
  <ion-card-header>
    <ion-card-title>Soumissions</ion-card-title>
  </ion-card-header>
  <ion-card-content>
    <ion-grid>
      <ion-row class="header-row ion-text-center">
        <ion-col>Nom</ion-col>
        <ion-col>Email</ion-col>
        <ion-col>Message</ion-col>
      </ion-row>
      <ion-row *ngFor="let submission of submissions" class="ion-text-center">
        <ion-col>{{ submission.name }}</ion-col>
        <ion-col>{{ submission.email }}</ion-col>
        <ion-col>{{ submission.message }}</ion-col>
      </ion-row>
      <ion-row *ngIf="submissions.length === 0" class="ion-text-center">
        <ion-col>Aucune soumission pour le moment.</ion-col>
      </ion-row>
    </ion-grid>
  </ion-card-content>
</ion-card>

</ion-content>
